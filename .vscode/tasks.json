{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Build & Flash (LM4F120, single file)",
      "type": "shell",
      // arm-none-eabi-gcc -mcpu=cortex-m4 -mthumb -mfloat-abi=hard -mfpu=fpv4-sp-d16 -Os -ffunction-sections  -fdata-sections -nostdlib -T blinky.ld -Wl,--gc-sections -Wl,-Map=blinky.map -g -Wall -Wextra -o blinky.elf blinky.c startup_gcc.c -I $TW -L /home/brave/ti/tivaware/driverlib/gcc -ldriver -lgcc -lc
      // startup_gcc.c -I $TW -L /home/brave/ti/tivaware/driverlib/gcc -ldriver -lgcc -lc
      "command": "arm-none-eabi-gcc",
      "args": [
        "-DPART_TM4C123GH6PM",
        "-DTARGET_IS_TM4C123_RA1",
        "-mcpu=cortex-m4",
        "-mthumb",
        "-mfloat-abi=hard",
        "-mfpu=fpv4-sp-d16",
        "-Os",
        "-ffunction-sections",
        "-fdata-sections",
        "-nostdlib",
        // "-T", "/home/brave/ti/tivaware/common/blinky.ld",
        "-T", "/home/brave/ti/tivaware/common/tiva.ld",
        "-Wl,--gc-sections",
        "-Wl,-Map=${fileBasenameNoExtension}.map",
        "-g",
        "-Wall",
        "-Wextra",
        "-o", "${fileBasenameNoExtension}.elf",
        "${fileBasename}",
        "/home/brave/ti/tivaware/common/startup_gcc.c",

	      "-I", "/home/brave/ti/tivaware",
        "-I", "/home/brave/ti/tivaware/inc",

        "-L", "/home/brave/ti/tivaware/driverlib/gcc",
        "-ldriver", 
        "-lgcc", 
        "-lc",

        "&&",
        "arm-none-eabi-objcopy",
        "-O", "binary",
        "${fileBasenameNoExtension}.elf",
        "${fileBasenameNoExtension}.bin",

        "&&",
        "lm4flash", "${fileBasenameNoExtension}.bin",

        "&&", "rm", "*.elf", "*.bin", "*.map",
        // "&&",
        // "openocd",
        // "-f", "board/ek-lm4f120xl.cfg",
        // "-c",
        // "program ${fileBasenameNoExtension}.bin verify reset exit"
      ],
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": ["$gcc"]
    }
  ]
}
